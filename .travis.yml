language: node_js
node_js: "8"
matrix:
  include:
    - os: windows
      env:
        - COMMAND="npm install"
    - os: osx
      osx_image: xcode9.2
      env:
        - COMMAND="npm test"
        - COMMAND="npm run e2e-test" _FORCE_LOGS=1
      before_install:
        - wget -P /tmp/ https://dl.google.com/chrome/mac/stable/GGRO/googlechrome.dmg;
        - hdiutil attach /tmp/googlechrome.dmg
        - sudo cp -r /Volumes/Google\ Chrome/Google\ Chrome.app /Applications/
      after_success:
        - npm run coverage
before_script:
  - npm run chromedriver
script:
  - $COMMAND
